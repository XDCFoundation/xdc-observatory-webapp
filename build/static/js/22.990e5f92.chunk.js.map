{"version":3,"sources":["modules/contractMethods/read.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"],"names":["QuestionContainer","styled","div","props","isActive","QuestionNameContainer","QuestionName","ArrowImg","img","OutputContainer","Title","Output","Devider","hr","ParentContainer","InputTypeFunctionsContainer","InputName","ParamInput","input","SubmitButton","button","ErrorText","ContractRead","React","useState","readResponses","readFunctions","contractAddress","state","setState","useEffect","contractInfo","contractData","abi","JSON","parse","readFunction","filter","item","stateMutability","contractMethodTypes","view","map","response","address","replace","handleFunctionClick","index","haveInputs","a","hasParams","params","method","name","web3","Web3","process","contract","eth","Contract","methods","call","existingIndex","findIndex","methodExecutionResponse","push","console","log","length","key","onClick","inputs","src","InputTypeFunctions","itemIndex","functionDetail","handleSubmit","OutPutComponent","setParams","error","setError","paramKeys","idx","placeholder","type","onChange","event","value","includes","param","Number","handleParamsInput","target","requiredInpuIndex","Object","values","keys","handleInputSubmit","outputs","it","join","_taggedTemplateLiteral","strings","raw","slice","freeze","defineProperties"],"mappings":"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","file":"static/js/22.990e5f92.chunk.js","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\nimport { contractMethodTypes } from \"../../constants\";\nimport Web3 from \"web3\";\n\nconst QuestionContainer = styled.div`\n  background-color: #f8f9fa !important;\n  font-weight: 400;\n  color: #212529;\n  cursor: pointer;\n  font-size: 1rem;\n  line-height: 1.5;\n  border-radius: 0.5rem;\n  height: ${(props) => (props.isActive ? \"auto\" : \"40px\")};\n  min-height: ${(props) => (props.isActive ? \"100px\" : \"40px\")};\n  transition: min-height 0.5s ease-out;\n`;\nconst QuestionNameContainer = styled.div`\n  color: #343a40 !important;\n  border-radius: 0.5rem;\n  padding: 0.5rem;\n  border: 1px solid rgba(0, 0, 0, 0.125);\n  height: 40px;\n  display: flex;\n  flex-flow: row;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst QuestionName = styled.div`\n  color: #343a40 !important;\n  padding: 0.5rem;\n`;\n\nconst ArrowImg = styled.img`\n  transform: ${(props) => (props.isActive ? \"rotate(90deg)\" : \"\")};\n  transition: transform 0.5s ease-in-out;\n`;\n\nconst OutputContainer = styled.div`\n  display: flex;\n  flex-flow: column;\n  border-radius: 0.5rem;\n  gap: 10px;\n  background-color: white;\n  padding: 1.5rem;\n  border-left: 1px solid rgba(0, 0, 0, 0.125);\n  border-right: 1px solid rgba(0, 0, 0, 0.125);\n  border-bottom: 1px solid rgba(0, 0, 0, 0.125);\n`;\n\nconst Title = styled.div`\n  color: #343a40 !important;\n  font-weight: bold;\n  font-size: 15px;\n`;\n\nconst Output = styled.div`\n  color: #343a40 !important;\n  word-wrap: break-word;\n  font-size: 15px;\n`;\n\nconst Devider = styled.hr``;\n\nconst ParentContainer = styled.div`\n  padding: 1.875rem;\n  display: flex;\n  flex-flow: column;\n  gap: 10px;\n  @media (min-width: 0px) and (max-width: 767px) {\n    padding: 1.875rem 0.75rem 0 0.75rem;\n  }\n`;\n\nconst InputTypeFunctionsContainer = styled.div`\n  display: flex;\n  flex-flow: column;\n  gap: 10px;\n`;\n\nconst InputName = styled.div`\n  color: #343a40 !important;\n  word-wrap: break-word;\n  font-size: 13px;\n`;\n\nconst ParamInput = styled.input`\n  color: #343a40 !important;\n  font-size: 13px;\n  min-height: 35px;\n  min-width: 100px;\n  outline: none;\n  border: 1px solid rgba(0, 0, 0, 0.125);\n  border-radius: 5px;\n  padding: 5px;\n\n  :active {\n    outline: none;\n  }\n  :hover {\n    outline: none;\n  }\n`;\n\nconst SubmitButton = styled.button`\n  border-radius: 5px;\n  border: 1px solid #d5dae2;\n  background: linear-gradient(to bottom, #2149b9, #3e71ff);\n  width: 80px;\n  height: 30px;\n  font-size: 14px;\n  font-weight: 600;\n  color: white;\n`;\n\nconst ErrorText = styled.div`\n  font-size: 12px;\n  color: red;\n`;\nexport default function ContractRead(props) {\n  const [state, setState] = React.useState({\n    readResponses: [],\n    readFunctions: [],\n    contractAddress: \"\",\n  });\n\n  React.useEffect(() => {\n    let contractInfo = props.contractData ? props.contractData : {};\n    contractInfo.abi = JSON.parse(contractInfo.abi);\n    let readFunction = contractInfo.abi.filter(\n      (item) => item.stateMutability == contractMethodTypes.view\n    );\n    readFunction = readFunction.map((item) => {\n      return { ...item, isActive: false, response: {} };\n    });\n    setState({\n      ...state,\n      readFunctions: readFunction,\n      contractAddress: contractInfo.address.replace(\"xdc\", \"0x\"),\n    });\n  }, [props.contractData]);\n\n  const handleFunctionClick = async (\n    index,\n    isActive,\n    haveInputs,\n    hasParams = false,\n    params\n  ) => {\n    let readFunctions = [...state.readFunctions];\n\n    if (isActive) {\n      readFunctions[index].isActive = false;\n      readFunctions[index].response = {};\n      setState({ ...state, readFunctions });\n      return;\n    }\n    try {\n      if (!haveInputs) {\n        const method = readFunctions[index].name;\n        let web3 = new Web3(process.env.REACT_APP_WEB3_URL);\n        const contract = new web3.eth.Contract(\n          readFunctions,\n          state.contractAddress\n        );\n        let response = hasParams\n          ? await contract.methods[method](...params).call()\n          : await contract.methods[method]().call();\n\n        let existingIndex = state.readResponses.findIndex(\n          (item) => item.method == method && item.index == index\n        );\n        let methodExecutionResponse = state.readResponses;\n        if (existingIndex !== -1) {\n          methodExecutionResponse[existingIndex] = { method, index, response };\n        } else {\n          methodExecutionResponse.push({ method, index, response });\n        }\n        readFunctions[index].response = { method, index, response };\n        setState({ ...state, readResponses: methodExecutionResponse });\n      }\n      readFunctions[index].isActive = true;\n      setState({ ...state, readFunctions });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <ParentContainer>\n      {state.readFunctions && state.readFunctions.length\n        ? state.readFunctions.map((item, index) => {\n            return (\n              <QuestionContainer isActive={item.isActive} key={index}>\n                <QuestionNameContainer\n                  onClick={() =>\n                    handleFunctionClick(\n                      index,\n                      item.isActive,\n                      item.inputs.length > 0\n                    )\n                  }\n                >\n                  <QuestionName>{`${index + 1}. ${item.name}`}</QuestionName>\n                  <ArrowImg isActive={item.isActive} src=\"/images/next.svg\" />\n                </QuestionNameContainer>\n                {item.isActive ? (\n                  <OutputContainer>\n                    {item.inputs.length > 0 ? (\n                      <InputTypeFunctions\n                        itemIndex={index}\n                        functionDetail={item}\n                        handleSubmit={handleFunctionClick}\n                      />\n                    ) : (\n                      <OutPutComponent item={item} />\n                    )}\n                  </OutputContainer>\n                ) : (\n                  \"\"\n                )}\n              </QuestionContainer>\n            );\n          })\n        : \"\"}\n    </ParentContainer>\n  );\n}\n\nconst InputTypeFunctions = ({ functionDetail, handleSubmit, itemIndex }) => {\n  const [params, setParams] = React.useState({});\n  const [error, setError] = React.useState(\"\");\n  React.useEffect(() => {\n    console.log(functionDetail.inputs, \"functionDetail.inputs\");\n    let paramKeys = {};\n    functionDetail.inputs.map((item) => {\n      paramKeys[item.name] = \"\";\n    });\n    console.log(paramKeys);\n    setParams(paramKeys);\n  }, [functionDetail]);\n\n  const handleParamsInput = (value, name, type) => {\n    if (value.includes(\"xdc\")) {\n      value = value.replace(/^.{3}/g, \"0x\");\n    }\n    setError(\"\");\n    let param = params;\n    param[name] = type === \"uint256\" ? Number(value) : value;\n    setParams(param);\n  };\n\n  const handleInputSubmit = () => {\n    let requiredInpuIndex = Object.values(params).findIndex(\n      (item) => item.length == 0\n    );\n    if (requiredInpuIndex !== -1) {\n      setError(`${Object.keys(params)[requiredInpuIndex]} is required field`);\n      return;\n    }\n    handleSubmit(itemIndex, false, false, true, Object.values(params));\n  };\n\n  return (\n    <>\n      {functionDetail.inputs.map((item, idx) => {\n        return (\n          <InputTypeFunctionsContainer key={idx}>\n            <InputName>{item.name}</InputName>\n            <ParamInput\n              placeholder={item.type}\n              onChange={(event) =>\n                handleParamsInput(event.target.value, item.name, item.type)\n              }\n            />\n          </InputTypeFunctionsContainer>\n        );\n      })}\n      <SubmitButton onClick={() => handleInputSubmit()}>Submit</SubmitButton>\n      <ErrorText>{error}</ErrorText>\n      {functionDetail?.response?.response ? (\n        <OutPutComponent item={functionDetail} />\n      ) : (\n        \"\"\n      )}\n    </>\n  );\n};\n\nconst OutPutComponent = ({ item }) => {\n  return (\n    <>\n      <Title>Output</Title>\n      <Output>{item?.response?.response}</Output>\n      <Devider />\n      <Title>Return Value Type</Title>\n      <Output>{item.outputs.map((it) => it.type).join(\",\")}</Output>\n    </>\n  );\n};\n","export default function _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}"],"sourceRoot":""}